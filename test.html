<!-- NOTE: THIS FILE IS JUST FOR TESTING -->
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<title>ðŸš¨TESTINGðŸš¨</title>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<style>
			p {
				font-family: monospace;
			}
		</style>
	</head>
	<body>
		<!-- <p>
			Hello, this is a test to see if this rapid api thing even works and how it does so
			because I am very curious and I need a simple page to be able to accurately select the
			correct divs. Hello, this is a test to see if this rapid api thing even works and how it
			does so because I am very curious and I need a simple page to be able to accurately
			select the correct divs. Hello, this is a test to see if this rapid api thing even works
			and how it does so because I am very curious and I need a simple page to be able to
			accurately select the correct divs. Hello, this is a test to see if this rapid api thing
			even works and how it does so because I am very curious and I need a simple page to be
			able to accurately select the correct divs. Hello, this is a test to see if this rapid
			api thing even works and how it does so because I am very curious and I need a simple
			page to be able to accurately select the correct divs. Hello, this is a test to see if
			this rapid api thing even works and how it does so because I am very curious and I need
			a simple page to be able to accurately select the correct divs.
		</p>
		<p>
			Hello, I am a very short text just to prove that short textsA aren't being transformed
		</p> -->

		<p id="api-test-1">initial state</p>
		<!-- <p id="api-test-2">initial state</p>
		<p id="api-test-3">initial state</p>
		<p id="api-test-4">initial state</p>
		<p id="api-test-5">initial state</p> -->

		<script>
			const alphabet = 'abcdefghijklmnopqrstuvwxyz'.split('');
			for (let i = 1; i <= 1; i++) {
				const element = document.getElementById('api-test-' + i);
				const texts = [];

				for (let j = 0; j < 200; j++) {
					let newWord = '';
					for (let k = 0; k < j; k++) {
						newWord += alphabet[Math.floor(Math.random() * alphabet.length)];
					}
					texts.push(newWord);
				}

				element.innerHTML = texts.join(' ');
			}

			// let textsA = [];
			// let textsB = [];
			// for (let i = 0; i < 20; i++) {
			// 	textsA.push('a'.repeat(i));

			// 	let newTextB = '';
			// 	for (let j = 0; j < i; j++) {
			// 		newTextB += alphabet[Math.floor(Math.random() * alphabet.length)];
			// 	}
			// 	textsB.push(newTextB);
			// }

			// elementA.innerText = textsA.join(' ');
			// elementB.innerText = textsB.join(' ');

			// setTimeout(() => {
			// 	const bionizedElements = document.getElementsByClassName('bionic-reader-container');
			// 	bionizedElements[2].innerHTML = bionizedElements[2].innerHTML
			// 		.split('<b')
			// 		.join('<br> <b');
			// 	bionizedElements[3].innerHTML = bionizedElements[3].innerHTML
			// 		.split('<b')
			// 		.join('<br> <b');
			// }, 1000);
			setTimeout(() => {
				const bionized = [
					document.querySelectorAll('#api-test-1 .bionic'),
					// document.querySelectorAll('#api-test-2 .bionic'),
					// document.querySelectorAll('#api-test-3 .bionic'),
					// document.querySelectorAll('#api-test-4 .bionic'),
					// document.querySelectorAll('#api-test-5 .bionic'),
				];

				const boldLettersCount = [];
				const boldPercentages = [];
				for (let i = 0; i < bionized.length; i++) {
					for (let j = 0; j < bionized[i].length; j++) {
						const bionizedElement = bionized[i][j];
						const numOfBoldLetters = bionizedElement.textContent.length;

						if (i === 0) {
							boldLettersCount.push(numOfBoldLetters);
							const boldPercentage = (numOfBoldLetters / (j + 2)) * 100;
							boldPercentages.push(boldPercentage);

							const predictedValues = getNumberOfBoldCharacters(j + 2);
							if (numOfBoldLetters === predictedValues.bold) {
								console.log('correct');
							} else {
								console.log(
									`(${j + 2}) expected: ${numOfBoldLetters}, actual: ${
										predictedValues.bold
									}`,
								);
							}
							//0,1,2,3,3,4,5,6,7,8,9,10,10,11,12,13,14,14,15,16,17,18,19,20,20,21,22,23,24,24,25,26,27,28,29,29,30,31,32,33,34,35,35,36,37,38,39,40,40,41,42,43,44,44,45,46,47,48,49,49,50,51,52,53,54,54,55,56,57,58,59,59,60,61,62,63,64,65,65,66,67,68,69,70,70,71,72,73,74,75,75,76,77,78,79,80,80,81,82,83,84,84,85,86,87,88,89,89,90,91,92,93,94,94,95,96,97,98,99,99,100,101,102,103,104,104,105,106,107,108,109,109,110,111,112,113,114,114,115,116,117,118,119,119,120,121,122,123,124,124,125,126,127,128,129,130,130,131,132,133,134,135,135,136,137,138,139,140,140,141,142,143,144,145,145,146,147,148,149,150,150,151,152,153,154,155,155,156,157,158,159,160,160,161,162,163,164,164,165
							// console.log({
							// 	total: j + 2,
							// 	bold: numOfBoldLetters,
							// 	normal: j + 2 - numOfBoldLetters,
							// 	boldPercentage: boldPercentage,
							// });
						} else if (boldLettersCount[j] !== numOfBoldLetters) {
							console.log('ðŸš¨INCONSISTENTðŸš¨');
						} else {
							console.log('All good âœ…');
						}
					}
				}

				const startOffset = 0;
				const avgBoldPercentage =
					boldPercentages.slice(startOffset).reduce((a, b) => a + b, 0) /
					(boldPercentages.length - startOffset);
				console.log({ avgBoldPercentage, boldLettersCount });
			}, 1000);

			function getNumberOfBoldCharacters(wordLength) {
				let boldCount = Math.round((wordLength - 2 / 3) * (5 / 6));

				// Handle edge cases that I wasn't able to nail with this formula
				switch (wordLength) {
					case 5:
						boldCount = 3;
				}

				return { bold: boldCount, normal: wordLength - boldCount };
			}
		</script>
	</body>
</html>
